


# 登录篇
## 1.你在设计登录时使用了JWT机制，什么是JWT
JWT是JSON Web Token，是一种标准，通常用于身份验证和信息交换。当用户进行登录时，服务端生成一个JWT token，将这个token返回给用户，此后用户每次请求都会携带JWT token，服务端会校验用户信息和token签名，从而实现服务端无状态的单点登录。

具体而言，JWT由三部分组成，分别是Header头部、Payload载荷、Signature签名，Header和Payload都是json格式数据进行base64编码得到，Signature是前两者的组合，经过服务器秘钥和算法的加密计算得到。
Header中主要存放使用哪种算法加密，以及声明token类型是JWT；
Payload中主要存放用户相关信息，如用户名id等

## 2.你在JWT中是怎么区分哪个用户的
解析Payload后查看用户信息即可

## 3.为什么要用JWT，有什么好处，不能直接用sessionId吗
JWT不需要服务器存储状态，只需要服务器存储一把秘钥，相对传统有状态的sessionID存储会方便很多，不需要每次查询比对token，因此节省了数据查询的io时间，适应分布式架构，不存在分布式系统token管理的问题；JWT可以扩展和定制，灵活性高

## 4.如何实现用户注销登录
如果是过期注销，可以使用内置的过期时间机制自动失效，确保token不是永久有效的，在payload中设置exp时间戳就可以了，这样服务器每次验证token时都会检查是否超时。

如果是用户主动注销，比较简单的做法是依赖前端，当客户注销登录时，前端把本地存储的JWT token删除，这样后续请求中就不会携带令牌，无法访问资源。如果追求更安全的方案，服务器可以维护一个token黑名单，如果用户发起注销则将token放入黑名单中，验证token时首先进行黑名单校验。黑名单后续等token过期或者用户重新登录时删除即可。

了解：单点登录SSO Single Sign-On，是指用户在一个应用的多个部分直接切换时，只需要登录一次，就可以访问该应用所有系统，不需要重复登录。具体实现通常使用token+认证中心的方式：用户访问系统时如果没有登录，那么就重定向到认证中心，认证中心让用户登录，登录后生成一个Token比如（JWT或者SessionID等），将Token或者秘钥存储在服务器，之后用户访问时携带这个Token，服务器来验证

## 5.你在数据库中怎么存储的密码
采用了MD5加密算法处理后进行的存储，防止密码明文存储易泄露

## 6.为什么用MD5加密，一定不会泄露吗
因为MD5算法是一种哈希算法，计算过程是不可逆的，生成散列值后就无法再还原得到原文。后续通过比对散列值来验证用户名密码，就不用担心密码泄露了。

目前并不是绝对安全的，之前MD5已经被破解，如果服务器被劫持还是有泄露风险，如果从加密的角度考虑，也可以替换为更安全的argon2等算法，核心思路都是一样的。同时也可以对登录增加双因素验证等方式加固，防止密文泄露也是比较关键的。